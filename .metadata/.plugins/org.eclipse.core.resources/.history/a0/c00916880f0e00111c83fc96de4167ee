package com.heladeria.service.impl;

import com.heladeria.model.Categoria;
import com.heladeria.repository.CategoriaRepository;
import com.heladeria.service.CategoriaService;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
@RequiredArgsConstructor
public class CategoriaServiceImpl implements CategoriaService {

  private final CategoriaRepository repo;

  @Override public List<Categoria> listar() { return repo.findAll(); }

  @Override public Categoria obtener(Integer id) {
    return repo.findById(id).orElseThrow(() -> new RuntimeException("Categoria no encontrada: " + id));
  }

  @Override public Categoria crear(Categoria c) {
    c.setId(null);
    return repo.save(c);
  }

  @Override public Categoria actualizar(Integer id, Categoria c) {
    Categoria db = obtener(id);
    db.setNombre(c.getNombre());
    return repo.save(db);
  }

  @Override public void eliminar(Integer id) {
    repo.delete(obtener(id));
  }
}